<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/iron-validator-behavior/iron-validator-behavior.html">

<script>
  ((Chatroom) => {

    Chatroom.MatchValidator = class extends Polymer.mixinBehaviors(
      [Polymer.IronValidatorBehavior], Polymer.Element
    ) {

      static get is() { return 'chatroom-match-validator'; }

      static get properties() {
        return {
          value: {
            type: String
          }
        };
      }

      ready() {
        new Polymer.IronMeta({ type: 'validator', key: this.constructor.is, value: this });
      }

      /**
       * Validate
       *
       * @param {String} value incoming value to compare with password
       * @return {Boolean} true if value and password match , false otherwise
       */
      validate(value) {
        return (value && this.value) &&
          encodeURIComponent(value) === encodeURIComponent(this.value);
      }
    }

    window.customElements.define(Chatroom.MatchValidator.is, Chatroom.MatchValidator);

  })(window.Chatroom = window.Chatroom || {})
</script>
